{"ast":null,"code":"import axios from 'axios';\nconst BASE_URL = '/odata/Orders';\nexport class OrderService {\n  static async getOrders() {\n    const response = await axios.get(BASE_URL);\n    return response.data.value;\n  }\n  static async getOrder(id) {\n    const response = await axios.get(`${BASE_URL}(${id})`);\n    return response.data;\n  }\n  static async createOrder(order) {\n    // 确保数据格式正确，包装在一个对象中\n    const payload = {\n      value: {\n        \"@odata.type\": \"#OData.Demo.Order\",\n        OrderNumber: order.orderNumber,\n        Status: order.status,\n        CustomerName: order.customerName,\n        CustomerEmail: order.customerEmail || null,\n        CustomerPhone: order.customerPhone || null,\n        Notes: order.notes || null,\n        Items: order.items.map(item => ({\n          \"@odata.type\": \"#OData.Demo.OrderItem\",\n          ProductCode: item.productCode,\n          ProductName: item.productName,\n          UnitPrice: Number(item.unitPrice),\n          Quantity: Number(item.quantity),\n          Notes: item.notes || null\n        }))\n      }\n    };\n    const response = await axios.post(BASE_URL, payload, {\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json',\n        'OData-Version': '4.0'\n      }\n    });\n    return response.data;\n  }\n  static async updateOrder(id, order) {\n    // 同样包装更新数据\n    const payload = {\n      value: {\n        \"@odata.type\": \"#OData.Demo.Order\",\n        ...Object.entries(order).reduce((acc, [key, value]) => ({\n          ...acc,\n          [key.charAt(0).toUpperCase() + key.slice(1)]: value\n        }), {})\n      }\n    };\n    await axios.patch(`${BASE_URL}(${id})`, payload, {\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json',\n        'OData-Version': '4.0'\n      }\n    });\n  }\n  static async deleteOrder(id) {\n    await axios.delete(`${BASE_URL}(${id})`, {\n      headers: {\n        'Accept': 'application/json',\n        'OData-Version': '4.0'\n      }\n    });\n  }\n}","map":{"version":3,"names":["axios","BASE_URL","OrderService","getOrders","response","get","data","value","getOrder","id","createOrder","order","payload","OrderNumber","orderNumber","Status","status","CustomerName","customerName","CustomerEmail","customerEmail","CustomerPhone","customerPhone","Notes","notes","Items","items","map","item","ProductCode","productCode","ProductName","productName","UnitPrice","Number","unitPrice","Quantity","quantity","post","headers","updateOrder","Object","entries","reduce","acc","key","charAt","toUpperCase","slice","patch","deleteOrder","delete"],"sources":["/Users/hongyaotang/src/odata4/src/main/webapp/src/services/OrderService.ts"],"sourcesContent":["import axios from 'axios';\nimport { Order, OrderItem, OrderStatus } from '../types/Order';\n\nconst BASE_URL = '/odata/Orders';\n\nexport class OrderService {\n    static async getOrders(): Promise<Order[]> {\n        const response = await axios.get(BASE_URL);\n        return response.data.value;\n    }\n\n    static async getOrder(id: number): Promise<Order> {\n        const response = await axios.get(`${BASE_URL}(${id})`);\n        return response.data;\n    }\n\n    static async createOrder(order: Omit<Order, 'id'>): Promise<Order> {\n        // 确保数据格式正确，包装在一个对象中\n        const payload = {\n            value: {\n                \"@odata.type\": \"#OData.Demo.Order\",\n                OrderNumber: order.orderNumber,\n                Status: order.status,\n                CustomerName: order.customerName,\n                CustomerEmail: order.customerEmail || null,\n                CustomerPhone: order.customerPhone || null,\n                Notes: order.notes || null,\n                Items: order.items.map(item => ({\n                    \"@odata.type\": \"#OData.Demo.OrderItem\",\n                    ProductCode: item.productCode,\n                    ProductName: item.productName,\n                    UnitPrice: Number(item.unitPrice),\n                    Quantity: Number(item.quantity),\n                    Notes: item.notes || null\n                }))\n            }\n        };\n\n        const response = await axios.post(BASE_URL, payload, {\n            headers: {\n                'Content-Type': 'application/json',\n                'Accept': 'application/json',\n                'OData-Version': '4.0'\n            }\n        });\n        return response.data;\n    }\n\n    static async updateOrder(id: number, order: Partial<Order>): Promise<void> {\n        // 同样包装更新数据\n        const payload = {\n            value: {\n                \"@odata.type\": \"#OData.Demo.Order\",\n                ...Object.entries(order).reduce((acc, [key, value]) => ({\n                    ...acc,\n                    [key.charAt(0).toUpperCase() + key.slice(1)]: value\n                }), {})\n            }\n        };\n\n        await axios.patch(`${BASE_URL}(${id})`, payload, {\n            headers: {\n                'Content-Type': 'application/json',\n                'Accept': 'application/json',\n                'OData-Version': '4.0'\n            }\n        });\n    }\n\n    static async deleteOrder(id: number): Promise<void> {\n        await axios.delete(`${BASE_URL}(${id})`, {\n            headers: {\n                'Accept': 'application/json',\n                'OData-Version': '4.0'\n            }\n        });\n    }\n} "],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAGzB,MAAMC,QAAQ,GAAG,eAAe;AAEhC,OAAO,MAAMC,YAAY,CAAC;EACtB,aAAaC,SAASA,CAAA,EAAqB;IACvC,MAAMC,QAAQ,GAAG,MAAMJ,KAAK,CAACK,GAAG,CAACJ,QAAQ,CAAC;IAC1C,OAAOG,QAAQ,CAACE,IAAI,CAACC,KAAK;EAC9B;EAEA,aAAaC,QAAQA,CAACC,EAAU,EAAkB;IAC9C,MAAML,QAAQ,GAAG,MAAMJ,KAAK,CAACK,GAAG,CAAC,GAAGJ,QAAQ,IAAIQ,EAAE,GAAG,CAAC;IACtD,OAAOL,QAAQ,CAACE,IAAI;EACxB;EAEA,aAAaI,WAAWA,CAACC,KAAwB,EAAkB;IAC/D;IACA,MAAMC,OAAO,GAAG;MACZL,KAAK,EAAE;QACH,aAAa,EAAE,mBAAmB;QAClCM,WAAW,EAAEF,KAAK,CAACG,WAAW;QAC9BC,MAAM,EAAEJ,KAAK,CAACK,MAAM;QACpBC,YAAY,EAAEN,KAAK,CAACO,YAAY;QAChCC,aAAa,EAAER,KAAK,CAACS,aAAa,IAAI,IAAI;QAC1CC,aAAa,EAAEV,KAAK,CAACW,aAAa,IAAI,IAAI;QAC1CC,KAAK,EAAEZ,KAAK,CAACa,KAAK,IAAI,IAAI;QAC1BC,KAAK,EAAEd,KAAK,CAACe,KAAK,CAACC,GAAG,CAACC,IAAI,KAAK;UAC5B,aAAa,EAAE,uBAAuB;UACtCC,WAAW,EAAED,IAAI,CAACE,WAAW;UAC7BC,WAAW,EAAEH,IAAI,CAACI,WAAW;UAC7BC,SAAS,EAAEC,MAAM,CAACN,IAAI,CAACO,SAAS,CAAC;UACjCC,QAAQ,EAAEF,MAAM,CAACN,IAAI,CAACS,QAAQ,CAAC;UAC/Bd,KAAK,EAAEK,IAAI,CAACJ,KAAK,IAAI;QACzB,CAAC,CAAC;MACN;IACJ,CAAC;IAED,MAAMpB,QAAQ,GAAG,MAAMJ,KAAK,CAACsC,IAAI,CAACrC,QAAQ,EAAEW,OAAO,EAAE;MACjD2B,OAAO,EAAE;QACL,cAAc,EAAE,kBAAkB;QAClC,QAAQ,EAAE,kBAAkB;QAC5B,eAAe,EAAE;MACrB;IACJ,CAAC,CAAC;IACF,OAAOnC,QAAQ,CAACE,IAAI;EACxB;EAEA,aAAakC,WAAWA,CAAC/B,EAAU,EAAEE,KAAqB,EAAiB;IACvE;IACA,MAAMC,OAAO,GAAG;MACZL,KAAK,EAAE;QACH,aAAa,EAAE,mBAAmB;QAClC,GAAGkC,MAAM,CAACC,OAAO,CAAC/B,KAAK,CAAC,CAACgC,MAAM,CAAC,CAACC,GAAG,EAAE,CAACC,GAAG,EAAEtC,KAAK,CAAC,MAAM;UACpD,GAAGqC,GAAG;UACN,CAACC,GAAG,CAACC,MAAM,CAAC,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,GAAGF,GAAG,CAACG,KAAK,CAAC,CAAC,CAAC,GAAGzC;QAClD,CAAC,CAAC,EAAE,CAAC,CAAC;MACV;IACJ,CAAC;IAED,MAAMP,KAAK,CAACiD,KAAK,CAAC,GAAGhD,QAAQ,IAAIQ,EAAE,GAAG,EAAEG,OAAO,EAAE;MAC7C2B,OAAO,EAAE;QACL,cAAc,EAAE,kBAAkB;QAClC,QAAQ,EAAE,kBAAkB;QAC5B,eAAe,EAAE;MACrB;IACJ,CAAC,CAAC;EACN;EAEA,aAAaW,WAAWA,CAACzC,EAAU,EAAiB;IAChD,MAAMT,KAAK,CAACmD,MAAM,CAAC,GAAGlD,QAAQ,IAAIQ,EAAE,GAAG,EAAE;MACrC8B,OAAO,EAAE;QACL,QAAQ,EAAE,kBAAkB;QAC5B,eAAe,EAAE;MACrB;IACJ,CAAC,CAAC;EACN;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}